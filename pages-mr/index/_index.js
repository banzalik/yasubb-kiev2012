(function(a){function f(e,f,g){var h=!1;if(c){var i=[];a.each(d,function(){g.hasOwnProperty(this)&&(h=!0)&&i.push({name:this,val:g[this]})}),h&&(a.each(g,function(a){i.push({name:a,val:this})}),g=i)}a.each(g,function(c,d){h&&(c=d.name,d=d.val);if(a.isFunction(d)&&(!b||d.toString().indexOf(".__base")>-1)){var g=e[c]||function(){};f[c]=function(){var a=this.__base;this.__base=g;var b=d.apply(this,arguments);return this.__base=a,b}}else f[c]=d})}var b=function(){_}.toString().indexOf("_")>-1,c=a.browser.msie,d=c?["toString","valueOf"]:null,e=function(){};a.inherit=function(){var b=arguments,c=a.isFunction(b[0]),d=c?b[0]:e,g=b[c?1:0]||{},h=b[c?2:1],i=g.__constructor||c&&d.prototype.__constructor?function(){return this.__constructor.apply(this,arguments)}:function(){};if(!c)return i.prototype=g,i.prototype.__self=i.prototype.constructor=i,a.extend(i,h);a.extend(i,d);var j=function(){},k=j.prototype=d.prototype,l=i.prototype=new j;return l.__self=l.constructor=i,f(k,l,g),h&&f(d,i,h),i},a.inheritSelf=function(a,b,c){var d=a.prototype;return f(d,d,b),c&&f(a,a,c),a}})(jQuery),function(a){var b=0,c="__"+ +(new Date),d=function(){return"uniq"+ ++b};a.identify=function(a,b){if(!a)return d();var e="uniqueID"in a?"uniqueID":c;return b||e in a?a[e]:a[e]=d()}}(jQuery),function(a){a.isEmptyObject||(a.isEmptyObject=function(a){for(var b in a)return!1;return!0})}(jQuery),function(a){a.extend({debounce:function(a,b,c,d){arguments.length==3&&typeof c!="boolean"&&(d=c,c=!1);var e;return function(){var f=arguments;d=d||this,c&&!e&&a.apply(d,f),clearTimeout(e),e=setTimeout(function(){c||a.apply(d,f),e=null},b)}},throttle:function(a,b,c){var d,e,f;return function(){e=arguments,f=!0,c=c||this,d||function(){f?(a.apply(c,e),f=!1,d=setTimeout(arguments.callee,b)):d=null}()}}})}(jQuery),function(a){var b="__"+ +(new Date)+"storage",c=function(b,c){return a.identify(b)+(c?a.identify(c):"")},d={buildEventName:function(a){return a},on:function(d,e,f,g,h){if(typeof d=="string"){a.isFunction(e)&&(g=f,f=e,e=undefined);var i=c(f,g),j=this[b]||(this[b]={}),k=d.split(" "),l=0,m;while(d=k[l++]){d=this.buildEventName(d),m=j[d]||(j[d]={ids:{},list:{}});if(!(i in m.ids)){var n=m.list,o={fn:f,data:e,ctx:g,special:h};n.last?(n.last.next=o,o.prev=n.last):n.first=o,m.ids[i]=n.last=o}}}else{var p=this;a.each(d,function(a,b){p.on(a,b,e,h)})}return this},onFirst:function(a,b,c,d){return this.on(a,b,c,d,{one:!0})},un:function(d,e,f){if(typeof d=="string"||typeof d=="undefined"){var g=this[b];if(g)if(d){var h=d.split(" "),i=0,j;while(d=h[i++]){d=this.buildEventName(d);if(j=g[d])if(e){var k=c(e,f),l=j.ids;if(k in l){var m=j.list,n=l[k],o=n.prev,p=n.next;o?o.next=p:n===m.first&&(m.first=p),p?p.prev=o:n===m.last&&(m.last=o),delete l[k]}}else delete this[b][d]}}else delete this[b]}else{var q=this;a.each(d,function(a,b){q.un(a,b,f)})}return this},trigger:function(c,d){var e=this,f=e[b],g;typeof c=="string"?c=a.Event(e.buildEventName(g=c)):c.type=e.buildEventName(g=c.type),c.target||(c.target=e);if(f&&(f=f[c.type])){var h=f.list.first,i;while(h)c.data=h.data,i=h.fn.call(h.ctx||e,c,d),typeof i!="undefined"&&(c.result=i,i===!1&&(c.preventDefault(),c.stopPropagation())),h.special&&h.special.one&&e.un(g,h.fn,h.ctx),h=h.next}return this}};a.observable=a.inherit(d,d)}(jQuery),function(a,b){function f(a,b,c){return(a?"__elem_"+a:"")+"__mod"+(b?"_"+b:"")+(c?"_"+c:"")}function g(b,c,d){a.isFunction(b)?c[f(d,"*","*")]=b:a.each(b,function(b,e){a.isFunction(e)?c[f(d,b,"*")]=e:a.each(e,function(a,e){c[f(d,b,a)]=e})})}function h(a,b){return b?Array.isArray(b)?function(c){var d=0,e=b.length;while(d<e)if(c.hasMod(a,b[d++]))return!0;return!1}:function(c){return c.hasMod(a,b)}:function(b){return b.hasMod(a)}}var c=[],d={},e={};this.BEM=a.inherit(a.observable,{__constructor:function(b,c,d){var e=this;e._modCache=b||{},e._processingMods={},e.params=a.extend(e.getDefaultParams(),c),d!==!1?e._init():e.afterCurrentEvent(e._init)},_init:function(){return this.setMod("js","inited").trigger("init")},changeThis:function(a,b){return a.bind(b||this)},afterCurrentEvent:function(a,b){this.__self.afterCurrentEvent(this.changeThis(a,b))},trigger:function(a,b){return this.__base(a=this.buildEvent(a),b).__self.trigger(a,b),this},buildEvent:function(b){return typeof b=="string"&&(b=a.Event(b)),b.block=this,b},hasMod:function(a,c,d){var e=arguments.length,f=!1;e==1?(d="",c=a,a=b,f=!0):e==2&&(typeof a=="string"?(d=c,c=a,a=b):(d="",f=!0));var g=this.getMod(a,c)===d;return f?!g:g},getMod:function(a,b){var c=typeof a;if(c==="string"||c==="undefined"){b=a||b;var d=this._modCache;return b in d?d[b]:d[b]=this._extractModVal(b)}return this._getElemMod(b,a)},_getElemMod:function(a,b,c){return this._extractModVal(a,b,c)},getMods:function(a){var c=a&&typeof a!="string",d=this,e=[].slice.call(arguments,c?1:0),f=d._extractMods(e,c?a:b);return c||(e.length?e.forEach(function(a){d._modCache[a]=f[a]}):d._modCache=f),f},setMod:function(c,d,e){typeof e=="undefined"&&(e=d,d=c,c=b);var f=this;if(!c||c[0]){var g=(c&&c[0]?a.identify(c[0]):"")+"_"+d;if(this._processingMods[g])return f;var h,i=c?f._getElemMod(d,c,h=f.__self._extractElemNameFrom(c)):f.getMod(d);if(i===e)return f;this._processingMods[g]=!0;var j=!0,k=[d,e,i];c&&k.unshift(c),[["*","*"],[d,"*"],[d,e]].forEach(function(a){j=f._callModFn(h,a[0],a[1],k)!==!1&&j}),!c&&j&&(f._modCache[d]=e),j&&f._afterSetMod(d,e,i,c,h),delete this._processingMods[g]}return f},_afterSetMod:function(a,b,c,d,e){},toggleMod:function(a,c,d,e,f){typeof a=="string"&&(f=e,e=d,d=c,c=a,a=b),typeof e=="undefined"?e="":typeof e=="boolean"&&(f=e,e="");var g=this.getMod(a,c);return(g==d||g==e)&&this.setMod(a,c,typeof f=="boolean"?f?d:e:this.hasMod(a,c,d)?e:d),this},delMod:function(a,c){return c||(c=a,a=b),this.setMod(a,c,"")},_callModFn:function(a,c,d,e){var g=f(a,c,d);return this[g]?this[g].apply(this,e):b},_extractModVal:function(a,b){return""},_extractMods:function(a,b){return{}},channel:function(a,b){return this.__self.channel(a,b)},getDefaultParams:function(){return{}},del:function(a){var b=[].slice.call(arguments);return typeof a=="string"&&b.unshift(this),this.__self.del.apply(this.__self,b),this},destruct:function(){}},{_name:"i-bem",blocks:d,decl:function(c,e,f){typeof c=="string"?c={block:c}:c.name&&(c.block=c.name);if(c.baseBlock&&!d[c.baseBlock])throw'baseBlock "'+c.baseBlock+'" for "'+c.block+'" is undefined';e||(e={}),e.onSetMod&&(g(e.onSetMod,e),delete e.onSetMod),e.onElemSetMod&&(a.each(e.onElemSetMod,function(a,b){g(b,e,a)}),delete e.onElemSetMod);var i=d[c.baseBlock||c.block]||this;if(c.modName){var j=h(c.modName,c.modVal);a.each(e,function(c,d){a.isFunction(d)&&(e[c]=function(){var a;if(j(this))a=d;else{var f=i.prototype[c];f&&f!==e[c]&&(a=this.__base)}return a?a.apply(this,arguments):b})})}var k;return c.block==i._name?(k=a.inheritSelf(i,e,f))._processLive(!0):(k=d[c.block]=a.inherit(i,e,f))._name=c.block,k},_processLive:function(a){return!1},create:function(a,b){return typeof a=="string"&&(a={block:a}),new d[a.block](a.mods,b)},getName:function(){return this._name},_extractElemNameFrom:function(a){},afterCurrentEvent:function(a,b){c.push({fn:a,ctx:b})==1&&setTimeout(this._runAfterCurrentEventFns,0)},_runAfterCurrentEventFns:function(){var a=c.length;if(a){var b,d=c.splice(0,a);while(b=d.shift())b.fn.call(b.ctx||this)}},changeThis:function(a,b){return a.bind(b||this)},del:function(a){var b=typeof a=="string",c=b?0:1,d=arguments.length;b&&(a=this);while(c<d)delete a[arguments[c++]];return this},channel:function(c,d){typeof c=="boolean"&&(d=c,c=b),c||(c="default");if(d){e[c]&&(e[c].un(),delete e[c]);return}return e[c]||(e[c]=new a.observable)}})}(jQuery),function(){Object.keys||(Object.keys=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b})}(),function(){var a=Array.prototype,b=Object.prototype.toString,c={indexOf:function(a,b){b=+(b||0);var c=this,d=c.length;if(d>0&&b<d){b=b<0?Math.ceil(b):Math.floor(b),b<-d&&(b=0),b<0&&(b+=d);while(b<d){if(b in c&&c[b]===a)return b;++b}}return-1},forEach:function(a,b){var c=-1,d=this,e=d.length;while(++c<e)c in d&&(b?a.call(b,d[c],c,d):a(d[c],c,d))},map:function(a,b){var c=-1,d=this,e=d.length,f=new Array(e);while(++c<e)c in d&&(f[c]=b?a.call(b,d[c],c,d):a(d[c],c,d));return f},filter:function(a,b){var c=-1,d=this,e=d.length,f=[];while(++c<e)c in d&&(b?a.call(b,d[c],c,d):a(d[c],c,d))&&f.push(d[c]);return f},reduce:function(a,b){var c=-1,d=this,e=d.length,f;if(arguments.length<2){while(++c<e)if(c in d){f=d[c];break}}else f=b;while(++c<e)c in d&&(f=a(f,d[c],c,d));return f}};for(var d in c)a[d]||(a[d]=c[d]);Array.isArray||(Array.isArray=function(a){return b.call(a)==="[object Array]"})}(),function(){var a=Array.prototype.slice;Function.prototype.bind||(Function.prototype.bind=function(b){var c=this,d=a.call(arguments,1);return function(){return c.apply(b,d.concat(a.call(arguments)))}})}(),function(a,b,c){function g(a,b,c){c.push(d,a,d,b)}function h(a,b,c,d){d.push(a),c&&g(b,c,d)}function i(a,b,d,f,i){h(a,c,c,i),i.push(e,b),f&&g(d,f,i)}var d="_",e="__",f="[a-zA-Z0-9-]+";a.INTERNAL={NAME_PATTERN:f,MOD_DELIM:d,ELEM_DELIM:e,buildModPostfix:function(a,b,c){var d=c||[];return g(a,b,d),c?d:d.join("")},buildClass:function(a,b,d,e,f){var g=typeof d;g=="string"?typeof e!="string"&&(f=e,e=d,d=b,b=c):g!="undefined"?(f=d,d=c):b&&typeof b!="string"&&(f=b,b=c);if(!(b||d||f))return a;var j=f||[];return b?i(a,b,d,e,j):h(a,d,e,j),f?j:j.join("")},buildClasses:function(a,d,e,f){d&&typeof d!="string"&&(f=e,e=d,d=c);var g=f||[];return d?i(a,d,c,c,g):h(a,c,c,g),e&&b.each(e,function(b,c){c&&(g.push(" "),d?i(a,d,b,c,g):h(a,b,c,g))}),f?g:g.join("")}}}(BEM,jQuery),function(a,b,c){function r(a,c){var d=a[0];b.each(v(d),function(e,f){t(f,d,e,c);var h=g[f.uniqId];h?h.domElem.index(d)<0&&(h.domElem=h.domElem.add(a),b.extend(h.params,f)):s(e,a,f)})}function s(a,b,d,e,h){typeof d=="boolean"&&(h=e,e=d,d=c);var i=b[0];d=t(d||v(i)[a],i,a);var j=d.uniqId;if(g[j])return g[j]._init();f[j]=f[j]?f[j].add(b):b;var l=k[a]||z.decl(a,{},{live:!0});if(!(l._liveInitable=!!l._processLive())||e||d.live===!1){var m=new l(f[j],d,!!e);return delete f[j],h&&h.apply(m,Array.prototype.slice.call(arguments,4)),m}}function t(a,c,d,e){(a||(a={})).uniqId||(a.uniqId=(a.id?d+"-id-"+a.id:b.identify())+(e||b.identify()));var f=b.identify(c),g=h[f]||(h[f]={});return g[d]||(g[d]=a),a}function u(a,b,c){var d=a.find(b);return c?d:d.add(a.filter(b))}function v(a){var c=b.identify(a);return h[c]||(h[c]=w(a))}function w(a){var c=a.onclick||a.ondblclick;if(!c&&a.tagName.toLowerCase()=="body"){var d=b(a),e=d.attr("onclick")||d.attr("ondblclick");e&&(c=Function(e))}return c?c():{}}function x(a){delete h[b.identify(a)]}function y(){return e[0][b.support.boxModel?"documentElement":"body"]}var d=b(window),e=b(document),f={},g={},h={},i={},j={},k=a.blocks,l=a.INTERNAL,m=l.NAME_PATTERN,n=l.MOD_DELIM,o=l.ELEM_DELIM,p=l.buildModPostfix,q=l.buildClass;b.fn.bem=function(a,b){return s(a,this,b,!0)};var z=a.DOM=a.decl("i-bem__dom",{__constructor:function(a,c,d){var e=this;e.domElem=a,e._eventNameCache={},e._elemCache={},g[e._uniqId=c.uniqId||b.identify(e)]=e,e._needSpecialUnbind=!1,e.__base(null,c,d)},findBlocksInside:function(a,b){return this._findBlocks("find",a,b)},findBlockInside:function(a,b){return this._findBlocks("find",a,b,!0)},findBlocksOutside:function(a,b){return this._findBlocks("parents",a,b)},findBlockOutside:function(a,b){return this._findBlocks("closest",a,b)[0]||null},findBlocksOn:function(a,b){return this._findBlocks("",a,b)},findBlockOn:function(a,b){return this._findBlocks("",a,b,!0)},_findBlocks:function(a,d,e,f){e||(e=d,d=c);var g=d?typeof d=="string"?this.findElem(d):d:this.domElem,h=typeof e=="string",i=h?e:e.block||e.blockName,j="."+(h?q(i):q(i,e.modName,e.modVal))+(f?":first":""),k=g.filter(j);a&&(k=k.add(g[a](j)));if(f)return k[0]?s(i,k.eq(0),!0):null;var l=[],m={};return b.each(k,function(a,c){var d=s(i,b(c),!0);m[d._uniqId]||(m[d._uniqId]=!0,l.push(d))}),l},bindToDomElem:function(a,c,d){var e=this;return d?a.bind(e._buildEventName(c),function(a){return(a.data||(a.data={})).domElem=b(this),d.apply(e,arguments)}):b.each(c,function(b,c){e.bindToDomElem(a,b,c)}),e},bindToDoc:function(a,b){return this._needSpecialUnbind=!0,this.bindToDomElem(e,a,b)},bindToWin:function(a,b){return this._needSpecialUnbind=!0,this.bindToDomElem(d,a,b)},bindTo:function(a,c,d){return!c||b.isFunction(c)?(d=c,c=a,a=this.domElem):typeof a=="string"&&(a=this.elem(a)),this.bindToDomElem(a,c,d)},unbindFromDomElem:function(a,b){return a.unbind(this._buildEventName(b)),this},unbindFromDoc:function(a){return this.unbindFromDomElem(e,a)},unbindFromWin:function(a){return this.unbindFromDomElem(d,a)},unbindFrom:function(a,b){return b?typeof a=="string"&&(a=this.elem(a)):(b=a,a=this.domElem),this.unbindFromDomElem(a,b)},_buildEventName:function(a){var b=this;return a.indexOf(" ")>1?a.split(" ").map(function(a){return b._buildOneEventName(a)}).join(" "):b._buildOneEventName(a)},_buildOneEventName:function(a){var b=this,c=b._eventNameCache;if(a in c)return c[a];var d="."+b._uniqId;if(a.indexOf(".")<0)return c[a]=a+d;var e=".bem_"+b.__self._name;return c[a]=a.split(".").map(function(a,b){return b==0?a+e:e+"_"+a}).join("")+d},trigger:function(a,b){return this.__base(a=this.buildEvent(a),b).domElem&&this._ctxTrigger(a,b),this},_ctxTrigger:function(a,c){var d=this,e=i[d.__self._buildCtxEventName(a.type)],f={};e&&d.domElem.each(function(){var g=this,h=e.counter;while(g&&h){var i=b.identify(g,!0);if(i){if(f[i])break;var j=e.ctxs[i];j&&(b.each(j,function(b,e){e.fn.call(e.ctx||d,a,c)}),h--),f[i]=!0}g=g.parentNode}})},setMod:function(a,c,d){if(a&&typeof d!="undefined"&&a.length>1){var e=this;return a.each(function(){var f=b(this);f.__bemElemName=a.__bemElemName,e.setMod(f,c,d)}),e}return this.__base(a,c,d)},_extractModVal:function(a,b,c){var d=(b||this.domElem)[0],e;return d&&(e=d.className.match(this.__self._buildModValRE(a,c||b))),e?e[2]:""},_extractMods:function(a,b){var c={},d=!a.length,e=0;return((b||this.domElem)[0].className.match(this.__self._buildModValRE("("+(d?m:a.join("|"))+")",b,"g"))||[]).forEach(function(a){var b=(a=a.trim()).lastIndexOf(n),d=a.substr(0,b-1).lastIndexOf(n);c[a.substr(d+1,b-d-1)]=a.substr(b+1),++e}),e<a.length&&a.forEach(function(a){a in c||(c[a]="")}),c},_afterSetMod:function(a,c,d,e,f){var g=this.__self,h=g._buildModClassPrefix(a,f),i=g._buildModValRE(a,f),j=c==="";(e||this.domElem).each(function(){var a=this.className;a.indexOf(h)>-1?this.className=a.replace(i,(j?"":"$1"+h+c)+"$3"):j||b(this).addClass(h+c)}),f&&this.dropElemCache(f,a,d).dropElemCache(f,a,c)},findElem:function(a,b,c,d){arguments.length%2?(d=c,c=b,b=a,a=this.domElem):typeof a=="string"&&(a=this.findElem(a));var e=this.__self,f="."+b.split(" ").map(function(a){return q(e._name,a,c,d)}).join(",.");return u(a,f)},_elem:function(a,b,c){var d=a+p(b,c),e;return(e=this._elemCache[d])||(e=this._elemCache[d]=this.findElem(a,b,c),e.__bemElemName=a),e},elem:function(a,c,d){if(c&&typeof c!="string")return c.__bemElemName=a,c;if(a.indexOf(" ")<0)return this._elem(a,c,d);var e=b([]),f=this;return a.split(" ").forEach(function(a){e=e.add(f._elem(a,c,d))}),e},dropElemCache:function(a,b,c){if(a){var d=this,e=p(b,c);a.indexOf(" ")<0?delete d._elemCache[a+e]:a.split(" ").forEach(function(a){delete d._elemCache[a+e]})}else this._elemCache={};return this},elemParams:function(a){var b;return typeof a=="string"?(b=a,a=this.elem(a)):b=this.__self._extractElemNameFrom(a),w(a[0])[q(this.__self.getName(),b)]||{}},containsDomElem:function(a){var b=!1;return this.domElem.each(function(){return!(b=a.parents().andSelf().index(this)>-1)}),b},buildSelector:function(a,b,c){return this.__self.buildSelector(a,b,c)},destruct:function(a){var c=this,d=c.__self;c._isDestructing=!0,c._needSpecialUnbind&&d.doc.add(d.win).unbind("."+c._uniqId),c.dropElemCache().domElem.each(function(a,c){b.each(v(c),function(a,b){var c=g[b.uniqId];c&&!c._isDestructing&&c.destruct()}),x(c)}),a||c.domElem.remove(),delete g[c.un()._uniqId],delete c.domElem,delete c._elemCache,c.__base()}},{doc:e,win:d,_processLive:function(a){var c=this,d=c._liveInitable;if("live"in c){var e=typeof d=="undefined";e^a&&(b.isFunction(c.live)?(d=c.live()!==!1,c.live=function(){}):d=c.live)}return d},init:function(a,c,d){if(!a||b.isFunction(a))d=c,c=a,a=e;var f=b.identify();return u(a,".i-bem").each(function(){r(b(this),f)}),c&&this.afterCurrentEvent(function(){c.call(d||this,a)}),this._runAfterCurrentEventFns(),a},destruct:function(a,d,e){typeof a!="boolean"&&(e=d,d=a,a=c),u(d,".i-bem",e).each(function(){b.each(v(this),function(a,b){if(b.uniqId){var c=g[b.uniqId];c&&c.destruct(!0)}}),x(this)}),a||(e?d.empty():d.remove())},update:function(a,b,c,d){this.destruct(a,!0),this.init(a.html(b),c,d)},append:function(a,c){this.init(b(c).appendTo(a))},prepend:function(a,c){this.init(b(c).prependTo(a))},before:function(a,c){this.init(b(c).insertBefore(a))},after:function(a,c){this.init(b(c).insertAfter(a))},_buildCtxEventName:function(a){return this._name+":"+a},_liveClassBind:function(a,c,d,f){var g=this;if(c.indexOf(" ")>-1)c.split(" ").forEach(function(b){g._liveClassBind(a,b,d,f)});else{var h=j[c],i=b.identify(d);h||(h=j[c]={},e.bind(c,g.changeThis(g._liveClassTrigger,g))),h=h[a]||(h[a]={uniqIds:{},fns:[]}),i in h.uniqIds||(h.fns.push({uniqId:i,fn:g._buildLiveEventFn(d,f)}),h.uniqIds[i]=h.fns.length-1)}return this},_liveClassUnbind:function(a,c,d){var e=j[c];if(e)if(d){if(e=e[a]){var f=b.identify(d);if(f in e.uniqIds){var g=e.uniqIds[f],h=e.fns.length-1;e.fns.splice(g,1);while(g<h)e.uniqIds[e.fns[g++].uniqId]=g-1;delete e.uniqIds[f]}}}else delete e[a];return this},_liveClassTrigger:function(a){var c=j[a.type];if(c){var d=a.target,e=[];for(var f in c)c.hasOwnProperty(f)&&e.push(f);do{var g=" "+d.className+" ",h=0;while(f=e[h++])if(g.indexOf(" "+f+" ")>-1){var i=0,k=c[f].fns,l;while(l=k[i++])l.fn.call(b(d),a);if(a.isPropagationStopped())return;e.splice(--h,1)}}while(e.length&&(d=d.parentNode))}},_buildLiveEventFn:function(a,c){var d=this;return function(e){var f=[d._name,((e.data||(e.data={})).domElem=b(this)).closest(d.buildSelector()),!0],g=s.apply(null,c?f.concat([a,e]):f);g&&(c||a&&a.apply(g,arguments))}},liveInitOnEvent:function(a,b,c){return this.liveBindTo(a,b,c,!0)},liveBindTo:function(a,d,e,f){b.isFunction(d)&&(e=d,d=a,a=c);if(!a||typeof a=="string")a={elem:a};a.elemName&&(a.elem=a.elemName);var g=this;return a.elem&&a.elem.indexOf(" ")>1?(a.elem.split(" ").forEach(function(b){g._liveClassBind(q(g._name,b,a.modName,a.modVal),d,e,f)}),g):g._liveClassBind(q(g._name,a.elem,a.modName,a.modVal),d,e,f)},liveUnbindFrom:function(a,b,c){var d=this;return a.indexOf(" ")>1?(a.split(" ").forEach(function(a){d._liveClassUnbind(q(d._name,a),b,c)}),d):d._liveClassUnbind(q(d._name,a),b,c)},_liveInitOnBlockEvent:function(a,b,c,d){var e=this._name;return k[b].on(a,function(a){var b=a.block[d](e);c&&b.forEach(function(a){c.call(a)})}),this},liveInitOnBlockEvent:function(a,b,c){return this._liveInitOnBlockEvent(a,b,c,"findBlocksOn")},liveInitOnBlockInsideEvent:function(a,b,c){return this._liveInitOnBlockEvent(a,b,c,"findBlocksOutside")},liveInitOnBlockInit:function(a,b){return this.liveInitOnBlockEvent("init",a,b)},liveInitOnBlockInsideInit:function(a,b){return this.liveInitOnBlockInsideEvent("init",a,b)},on:function(a,b,c,d,e){return a.jquery?this._liveCtxBind(a,b,c,d,e):this.__base(a,b,c,d)},un:function(a,b,c,d){return a.jquery?this._liveCtxUnbind(a,b,c,d):this.__base(a,b,c)},liveCtxBind:function(a,b,c,d,e){return this._liveCtxBind(a,b,c,d,e)},_liveCtxBind:function(a,d,e,f,g){var h=this;if(typeof d=="string"){b.isFunction(e)&&(g=f,f=e,e=c);if(d.indexOf(" ")>-1)d.split(" ").forEach(function(b){h._liveCtxBind(a,b,e,f,g)});else{var j=h._buildCtxEventName(d),k=i[j]||(i[j]={counter:0,ctxs:{}});a.each(function(){var a=b.identify(this),c=k.ctxs[a];c||(c=k.ctxs[a]={},++k.counter),c[b.identify(f)+(g?b.identify(g):"")]={fn:f,data:e,ctx:g}})}}else b.each(d,function(b,c){h._liveCtxBind(a,b,c,e)});return h},liveCtxUnbind:function(a,b,c,d){return this._liveCtxBind(a,b,c,d)},_liveCtxUnbind:function(a,c,d,e){var f=this,g=i[c=f.buildEventName(c)];return g&&(a.each(function(){var a=b.identify(this,!0),c;if(a&&(c=g.ctxs[a])){d&&delete c[b.identify(d)+(e?b.identify(e):"")];if(!d||b.isEmptyObject(c))g.counter--,delete g.ctxs[a]}}),g.counter||delete i[c]),f},_extractElemNameFrom:function(a){if(a.__bemElemName)return a.__bemElemName;var b=a[0].className.match(this._buildElemNameRE());return b?b[1]:c},extractParams:w,_buildModClassPrefix:function(a,b){return q(this._name)+(b?o+(typeof b=="string"?b:this._extractElemNameFrom(b)):"")+n+a+n},_buildModValRE:function(a,b,c){return new RegExp("(\\s?)"+this._buildModClassPrefix(a,b)+"("+m+")(\\s|$)",c)},_buildElemNameRE:function(){return new RegExp(this._name+o+"("+m+")(?:\\s|$)")},buildSelector:function(a,b,c){return"."+q(this._name,a,b,c)},getBlockByUniqId:function(a){return g[a]},getWindowSize:function(){return{width:d.width(),height:d.height()}}})}(BEM,jQuery),function(){String.prototype.trim||(String.prototype.trim=function(){var a=this.replace(/^\s\s*/,""),b=/\s/,c=a.length;while(b.test(a.charAt(--c)));return a.slice(0,c+1)})}(),$(function(){BEM.DOM.init()}),mailru.loader.require("api",function(){mailru.app.init("fad28d0fbfe141b09626dcfd74fafd67")}),function(a){function b(a){for(var b={},c=0;c<z.length;c++){var d=z[c][0],e=z[c][1];if(a){var f=a.attr("data-"+d);f&&("number"==e?(f=Number(f),isNaN(f)||(b[d]=f)):"boolean"==e?"true"==f?b[d]=!0:"false"==f&&(b[d]=!1):"string"==e?b[d]=f:"boolean-number"==e&&("true"==f?b[d]=!0:"false"==f?b[d]=!1:(f=Number(f),isNaN(f)||(b[d]=f))))}else b[d]=z[c][2]}return b}function c(a,b){for(var c={},d=0;d<A.length;d++)c[A[d]+a]=b;return c}function d(a,b){if(n)return c("transform",b?"translate(0,"+a+"px)":"translate("+a+"px,0)");var d={};return d[b?"top":"left"]=a,d}function e(){return!1}function f(a){return c("transition-duration",a+"ms")}function g(a){a.mousemove(function(a){a.preventDefault()}).mousedown(function(a){a.preventDefault()})}function h(a){a.preventDefault(),document.selection&&document.selection.empty?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges()}function j(b,c){function j(d,e,f){d&&(jb.no.test(d)||jb.px.test(d)?(cb=ab=Number((""+d).replace("px","")),hb=ib=!1):jb["%"].test(d)?(fb=Number((""+d).replace("%",""))/100,ib=!c().flexible,ab||(ab=b.width()*(vb?1:fb)-(c().vertical&&uc?uc.width():0)),hb=!1):hb=!0),e&&(jb.no.test(e)||jb.px.test(e)?(db=bb=Number((""+e).replace("px","")),gb=!1):gb=!0);if("auto"==d||!d||"auto"==e||!e){var f=Number(f),g=qc.filter(function(){return a(this).data("state")!="error"}).filter(":first").data("srcKey");if(isNaN(f)||!f)f=null,g&&(f=X[g].imgRatio);if(f){nb=mb=lb=f;if(g){if("auto"==d||!d)cb=ab=X[g].imgWidth,hb=!0;if("auto"==e||!e)db=bb=X[g].imgHeight,gb=!0}gb&&f&&!hb&&(db=bb=Math.round(ab/f)),!gb&&f&&hb&&(cb=ab=Math.round(bb*f))}}}function z(a){var d;if(c().fitToWindowHeight||vb)d=v.height();if(!lb||a)nb=mb=lb=ab/bb;c().thumbs&&!vc&&(vc=c().vertical?uc.width():uc.height()),lb=ub?nb:mb,b.css({overflow:ib||vb?"hidden":""}),ib||vb?ab=b.width()*(vb?1:fb)-(c().vertical&&vc?vc:0):cb&&(ab=cb),vb?(bb=d-(!c().vertical&&vc?vc:0),lb=ab/bb):gb?bb=Math.round(ab/lb):(bb=db,lb=ab/bb),c().fitToWindowHeight&&!vb&&bb>d-20-(!c().vertical&&vc?vc:0)&&(bb=d-20-(!c().vertical&&vc?vc:0),lb=ab/bb)}function A(b,d,e){z(b),d||(d=0);var f=ab!=ob||bb!=qb||lb!=rb;if(b||f){c().vertical?($=bb,_=ab):($=ab,_=bb),Yb.add(qc).animate({width:ab,height:bb},d),c().thumbs&&c().vertical&&(c().thumbsOnRight?uc.animate({left:ab},d):Yb.animate({left:vc},d)),c().touchStyle?(Fb=($+c().margin)*W-c().margin,Gb=_,b={},b[Wb]=Fb,b[Xb]=Gb,Zb.animate(b,d).data(b).data({minPos:-(Fb-$),maxPos:0})):Zb.animate({width:ab,height:bb},d),c().thumbs&&(c().vertical?uc.animate({height:bb},d):uc.animate({width:ab},d),c().thumbsPreview&&f&&I(d,e),uc.css({visibility:"visible"})),o&&!c().vertical&&(c().arrows&&dc.animate({top:bb/2},d),b={},b[Tb]=_/2,$b.animate(b,d));if("loading"==S||"error"==S)b={},b[Sb]=(c().touchStyle?oc:0)*($+c().margin)+$/2,$b.animate(b,d);nc&&c().touchStyle&&(e=-oc*($+c().margin),F(Zb,e,0)),sb=!0;var g=0;a(Jc).each(function(){clearTimeout(this)}),Jc=[],J(nc,oc,d),qc.each(function(b){if(b!=oc){var c=a(this);c.data("img")&&c.data("img").css({visibility:"hidden"});var d=setTimeout(function(){J(c,b)},g*50+50);Jc.push(d),g++}})}ob=ab,qb=bb,rb=lb}function B(){var a=nc.data("srcKey");a&&X[a].imgWidth&&X[a].imgHeight&&X[a].imgRatio&&(cb=ab=X[a].imgWidth,db=bb=X[a].imgHeight,mb=lb=X[a].imgRatio,A(!1,c().transitionDuration))}function D(a,d,e){function f(){c().touchStyle||(d=0),$b.css(Sb,d*($+c().margin)+$/2),_b=setTimeout(function(){$b.stop().show().fadeTo(0,1)},100)}clearTimeout(_b),"loading"==a?(f(),b.addClass(u+"_loading").removeClass(u+"_error"),C||$b.html("<span>&middot;&middot;&middot;</span>").css({backgroundImage:"none"})):"error"==a?(f(),b.addClass(u+"_error").removeClass(u+"_loading"),C||$b.html("<span>?</span>").css({backgroundImage:"none"})):"loaded"==a&&(b.removeClass(u+"_loading "+u+"_error"),$b.stop().fadeTo(Math.min(t,e),0,function(){$b.hide()})),S=a}function E(){return{index:oc,src:X[oc],img:nc[0],thumb:c().thumbs?sc[0]:null,caption:pc}}function F(a,e,g,h){var i=isNaN(e)?0:Math.round(e);clearTimeout(a.data("backAnimate")),h?(i=h,a.data({backAnimate:setTimeout(function(){F(a,e,Math.max(t,g/2))},g)})):c().onSlideStop&&setTimeout(function(){c().onSlideStop.call(b[0],E())},g),g&&(clearTimeout(yb),xb=!0),n?(a.css(f(g)),setTimeout(function(){a.css(d(i,c().vertical))},1)):a.stop().animate(d(i,c().vertical),g,s),yb=setTimeout(function(){xb=!1,c().flexible&&a==Zb&&B()},g)}function G(a,b,e){if(xc){if(!e||xc<$)Lb=!1;var g=sc.position()[Sb],e=sc.data()[Wb];if(!e&&Dc)Cc.hide(),Dc=!1;else{Dc||(Cc.show(),Dc=!0);if(xc>$){var h=g+e/2,i=$/2,j=Ec.index(sc),k=j-tc;void 0==yc&&(yc=wc.position()[Sb]);if(Qb&&b&&b>Math.max(36,2*c().thumbMargin)&&b<$-Math.max(36,2*c().thumbMargin)&&(0<k&&b>.75*i||0>k&&b<1.25*i)){var l;l=0<k?j+1:j-1,0>l?l=0:l>W-1&&(l=W-1),j!=l&&(h=Ec.eq(l),h=h.position()[Sb]+h.data()[Wb]/2,i=b)}b=-(xc-$),h=Math.round(-(h-i)+c().thumbMargin);if(0<k&&h>yc||0>k&&h<yc)h=g+yc<c().thumbMargin?-(g-c().thumbMargin):g+yc+e>$?-(2*g-$+e+c().thumbMargin):yc;h<=b?h=b:h>=c().thumbMargin&&(h=c().thumbMargin),wc.data({minPos:b}),H(h),Kb||wc.data({maxPos:c().thumbMargin})}else h=$/2-xc/2,wc.data({minPos:h}),Kb||wc.data({maxPos:h});!Lb&&!Kb?(F(wc,h,a),Mb&&(Lb=!0),yc=h):Mb=!0;var m=e-(q?0:2*c().thumbBorderWidth);n?(Cc.css(f(a)),setTimeout(function(){Cc.css(d(g,c().vertical)).css(Wb,m)},1)):c().vertical?Cc.stop().animate({top:g,height:m},a,s):Cc.stop().animate({left:g,width:m},a,s)}}}function H(a){c().shadows&&xc>$&&(uc.addClass(u+"__thumbs_shadow"),a<=wc.data("minPos")?uc.removeClass(u+"__thumbs_shadow_no-left").addClass(u+"__thumbs_shadow_no-right"):a>=c().thumbMargin?uc.removeClass(u+"__thumbs_shadow_no-right").addClass(u+"__thumbs_shadow_no-left"):uc.removeClass(u+"__thumbs_shadow_no-left "+u+"__thumbs_shadow_no-right"))}function I(a,b){if(!Ob&&!Kb&&!Ib&&!xb||b)vb||H(),G(a?a:0,!1,!b)}function J(a,b,d){var e=a.data("img"),f=a.data("detached"),d=d?d:0;if(e&&!f){var g=a.data("srcKey"),f=X[g].imgWidth,h=X[g].imgHeight,i=X[g].imgRatio,j=g=0;c().touchStyle&&a.css(Sb,b*($+c().margin));if(f!=ab||h!=bb||c().alwaysPadding||vb){var k=0;if(.99>i/lb||1.01<i/lb||c().alwaysPadding||vb)k=2*c().minPadding;i>=lb?c().cropToFit?(h=bb,f=Math.round(h*i)):(f=Math.round(ab-k)<f||c().zoomToFit||vb&&X[b].imgRel?Math.round(ab-k):f,h=Math.round(f/i),4>bb-h&&(h+=bb-h)):c().cropToFit?(f=ab,h=Math.round(f/i)):(h=Math.round(bb-k)<h||c().zoomToFit||vb&&X[b].imgRel?Math.round(bb-k):h,f=Math.round(h*i),4>ab-f&&(f+=ab-f))}f&&h&&(i={width:f,height:h},h!=bb&&(g=Math.round((bb-h)/2)),f!=ab&&(j=Math.round((ab-f)/2)),i.top=g,i.left=j,e.animate(i,d)),e.css({visibility:"visible"}),d=a.data("img"),e=a.data("srcKey"),b=X[b].imgRel,d&&b&&b!=e&&!m&&(f=d.data("full"),a=a.data("detached"),(vb&&!f||!vb&&f)&&!a)&&(d[0].src=vb?b:e,d.data({full:vb}))}else e&&f&&a.data({needToResize:!0})}function K(b,d,e,f){function g(a){function l(){i.css({visibility:"hidden"}),h.src=a,0==k&&(i.appendTo(d),"thumb"==f&&(xc+=rc+c().thumbMargin,wc.css(Wb,xc).data(Wb,xc),d.css(Wb,rc).data(Wb,rc)))}function m(){Z[a]="loaded",i.unbind("error load").error(function(){i[0].src=a,X[b].imgRel=!1,J(qc.eq(b),b),i.unbind("error")}),d.trigger("load."+u).data({state:"loaded"}),setTimeout(function(){X[a]||(X[a]=[],X[a].imgWidth=i.width(),X[a].imgHeight=i.height(),X[a].imgRatio=X[a].imgWidth/X[a].imgHeight),e(h,X[a].imgWidth,X[a].imgHeight,X[a].imgRatio,a,b)},100),"thumb"==f&&(Rb++,Rb==W&&(Qb=!0))}function n(b){Z[a]="error",i.unbind("error load"),k<j.length&&b?(k++,g(j[k])):(d.trigger("error."+u).data({state:"error"}),"thumb"==f&&(Rb++,Rb==W&&(Qb=!0)))}if(Z[a]){var o=function(){"error"==Z[a]?n(!1):"loaded"==Z[a]?m():setTimeout(o,100)};l(),o()}else Z[a]="loading",i.unbind("error load").error(function(){n(!0)}).load(m),l()}qc.eq(b);var h=new Image,i=a(h),j=[],k=0,l=X[b].imgHref,m=X[b].imgSrc,n=X[b].thumbSrc;if("img"==f){if(l&&(j.push(l),j.push(l+"?"+T)),m&&(j.push(m),j.push(m+"?"+T)),n)j.push(n),j.push(n+"?"+T)}else if(n&&(j.push(n),j.push(n+"?"+T)),m&&(j.push(m),j.push(m+"?"+T)),l)j.push(l),j.push(l+"?"+T);g(j[k])}function L(b,d){if(b.data("wraped"))c().detachSiblings&&b.data("detached")&&(b.data({detached:!1}).appendTo(Zb),b.data("needToResize")&&(J(b,d),b.data({needToResize:!1})));else if(Zb.append(b.data({state:"loading"})),d!=oc&&!c().touchStyle&&b.stop().fadeTo(0,0),b.data({wraped:!0,detached:!1}),K(d,b,function(e,f,g,h,i){e=a(e),e.addClass(u+"__img"),b.data({img:e,srcKey:i}),i=!1;if((!ab||!bb)&&!sb||!tb&&d==c().startImg)ab=f,c().width=f,gb?(bb=g,c().height=g):hb&&(ab=Math.round(bb*(f/g)),c().width=ab),i=!0,tb=d==c().startImg;i||c().flexible?A(!0):J(b,d),b.css({visibility:"visible"})},"img"),V&&U[d].html&&U[d].html.length||c().html&&c().html[d]&&c().html[d].length){var e=U[d].html||c().html[d];b.append(e)}}function M(b,d){var e=0,f=!1,g=[],h=[],j=vb?Math.min(1,c().preload):c().preload;for(i=0;i<2*j+1;i++){var k=d-j+i;if(0<=k&&k<W&&!c().loop||c().loop){0>k&&(k=W+k),k>W-1&&(k-=W);if(!qc.eq(k).data("wraped")||qc.eq(k).data("detached"))e++,g.push(k);h.push(k)}else f=!0}if(e>=j||f)a(g).each(function(a){setTimeout(function(){L(qc.eq(g[a]),g[a])},50*a)}),c().detachSiblings&&qc.filter(function(b){for(var c=a(this),e=!1,f=0;f<h.length&&!e;f++)h[f]==b&&(e=!0);return"loading"!=c.data("state")&&!e&&d!=b}).data({detached:!0}).detach()}function N(a){a||(a=0),clearTimeout(Eb),Eb=setTimeout(function(){Db&&b.trigger("showimg",[oc+1,!1,!0])},Math.max(c().autoplay,2*a))}function O(d,e,f,g,h,i,j){function k(){c().caption&&((pc=U[p].caption?U[p].caption:U[p].title)?Hc.html(pc).show():Hc.html("").hide())}function l(){if(c().shadows||!c().touchStyle)m.removeClass(u+"__frame_active"),d.addClass(u+"__frame_active")}var m,n,o,p=qc.index(d);qc.each(function(){a(this).unbind("load."+u+" error."+u)}),"number"!=typeof h&&(h=g?0:c().transitionDuration),!g&&e&&e.altKey&&(h*=10),e=d.data("state"),"loading"==e||!e?(D("loading",p,h),d.one("load."+u,function(){D("loaded",p,h),k()}),d.one("error."+u,function(){D("error",p,h),k()})):"error"==e?D("error",p,h):e!=S&&D("loaded",p,0),k(),nc?(m=nc,o=oc,c().thumbs&&(n=sc)):(m=qc.not(d),c().thumbs&&(n=Ec.not(Ec.eq(p)))),c().thumbs&&(sc=Ec.eq(p),o&&(tc=o),n.removeClass(u+"__thumb_selected").data("disabled",!1),sc.addClass(u+"__thumb_selected").data("disabled",!0)),c().thumbs&&c().thumbsPreview&&(o!=p||g)&&G(h,f);if(c().touchStyle)f=-p*($+c().margin),l(),F(Zb,f,h,i);else{var q=function(a){if(o!=p||g){var b=h,e=0;a&&(b=0,e=h),qc.not(m.stop()).stop().fadeTo(0,0),setTimeout(function(){l(),d.stop().fadeTo(b,1,function(){m.not(d).stop().fadeTo(e,0,function(){c().flexible&&B()})})},10)}};"loaded"==e?q():"error"==e?q(!0):(d.one("load."+u,function(){q()}),d.one("error."+u,function(){q(!0)}))}nc=d,oc=p,c().hash&&document.location.replace("#"+(oc+1)),Db&&!j&&c().stopAutoplayOnAction&&(Db=!1),N(h);var r=E();b.data(r),c().arrows&&((0==oc||2>W)&&!c().loop?ec.addClass(u+"__arr_disabled").data("disabled",!0):ec.removeClass(u+"__arr_disabled").data("disabled",!1),(oc==W-1||2>W)&&!c().loop?fc.addClass(u+"__arr_disabled").data("disabled",!0):fc.removeClass(u+"__arr_disabled").data("disabled",!1));var s=d.data("wraped");clearTimeout(Cb),Cb=setTimeout(function(){!s&&p!=c().startImg&&(L(d,p),c().onShowImg&&c().onShowImg.call(b[0],r,j)),M(d,p)},h+10);if(s||p==c().startImg)L(d,p),c().onShowImg&&c().onShowImg.call(b[0],r,j)}function P(a,b){b.stopPropagation(),b.preventDefault();var d=oc+a;0>d&&(d=c().loop?W-1:0),d>W-1&&(d=c().loop?0:W-1),O(qc.eq(d),b)}function Q(){clearTimeout(Kc),Kc=setTimeout(function(){A()},50)}function R(){wb||(v.bind("resize",Q),l&&window.addEventListener("orientationchange"
,Q,!1),wb=!0)}b.data({ini:!0,options:c}),c=function(){return b.data("options")},c().backgroundColor&&!c().background&&(c().background=c().backgroundColor),c().thumbsBackgroundColor&&!c().navBackground&&(c().navBackground=c().thumbsBackgroundColor),c().thumbColor&&!c().dotColor&&(c().dotColor=c().thumbColor),null!==c().click&&(c().pseudoClick=c().click);if(!0===c().nav||"true"==c().nav||"thumbs"==c().nav)c().thumbs=!0,c().thumbsPreview=!0;else if("dots"==c().nav)c().thumbs=!0,c().thumbsPreview=!1;else if(!1===c().nav||"false"==c().nav||"none"==c().nav)c().thumbs=!1;c().caption&&(!0===c().caption||"true"==c().caption||"simple"==c().caption?c().caption=!0:"overlay"!=c().caption&&(c().caption=!1)),"top"==c().navPosition?(c().thumbsOnTop=!0,c().thumbsOnRight=!1):"right"==c().navPosition?(c().thumbsOnTop=!1,c().thumbsOnRight=!0):"bottom"==c().navPosition?(c().thumbsOnTop=!1,c().thumbsOnRight=!1):"left"==c().navPosition&&(c().thumbsOnTop=!1,c().thumbsOnRight=!1);var S,T=(new Date).getTime();c().hash&&document.location.hash&&(c().startImg=parseInt(document.location.hash.replace("#",""))-1);var U,V=c().data&&("object"==typeof c().data||"string"==typeof c().data);U=V?a(c().data).filter(function(){return this.img||this.href||this.length}):b.children().filter(function(){var b=a(this);return(b.is("a")&&b.children("img").size()||b.is("img"))&&(b.attr("href")||b.attr("src")||b.children().attr("src"))});var W=U.size();b.data({size:W}),c().preload=Math.min(c().preload,W);if(c().startImg>W-1||"number"!=typeof c().startImg)c().startImg=0;var X=[];U.each(function(b){if(V)X[b]={imgHref:this.img?this.img:this.href?this.href:this.length?""+this:null,thumbSrc:this.thumb,imgRel:this.full};else{var d=a(this);X[b]={imgHref:d.attr("href"),imgSrc:d.attr("src"),thumbSrc:d.children().attr("src"),imgRel:d.attr("rel")?d.attr("rel"):d.children().attr("rel")},c().caption&&(this.caption=d.attr("alt")||d.children().attr("alt"))}}),b.html("").addClass(u+" "+(c().vertical?u+"_vertical":u+"_horizontal"));if(p||m)var Y=b.wrap('<div class="fotorama-outer"></div>').parent();c().arrows||(c().loop=!0);var Z=[],$,_,ab,bb,cb,db,fb=1,gb=!0,hb=!0,ib,jb={no:/^[0-9.]+$/,px:/^[0-9.]+px/,"%":/^[0-9.]+%/},lb,mb,nb,ob,qb,rb,sb,tb,ub,vb,wb,xb,yb,zb,Bb,Cb,Db,Eb;if(!0===c().autoplay||"true"==c().autoplay||0<c().autoplay)Db=!0;"number"!=typeof c().autoplay&&(c().autoplay=5e3);if(c().touchStyle)var Fb=0,Gb,Hb=!1,Ib=!1,Jb;if(c().thumbs&&c().thumbsPreview)var Kb=!1,Lb=!1,Mb=!1,Ob=!1,Pb,Qb=!1,Rb=0;var Sb,Tb,Ub,Vb,Wb,Xb;c().vertical?(Sb="top",Tb="left",Ub="pageY",Vb="pageX",Wb="height",Xb="width"):(Sb="left",Tb="top",Ub="pageX",Vb="pageY",Wb="width",Xb="height");var Yb=a('<div class="'+u+'__wrap"></div>').appendTo(b),Zb=a('<div class="'+u+'__shaft"></div>').appendTo(Yb);c().touchStyle||(g(Yb),g(Zb));var $b=a('<div class="'+u+'__state"></div>').appendTo(Zb);("white"==c().preloader||c().background&&c().background.match(/(white|#fff|#FFF)/))&&$b.addClass(u+"__state_white");var _b;if(c().fullscreenIcon)var ac=a('<div class="'+u+'__fsi"><i class="i1"><i class="i1"></i></i><i class="i2"><i class="i2"></i></i><i class="i3"><i class="i3"></i></i><i class="i4"><i class="i4"></i></i><i class="i0"></i></div>').appendTo(Yb);l&&b.addClass(u+"_touch"),m&&(c().shadows=!1),c().touchStyle?(Yb.addClass(u+"__wrap_style_touch"),c().shadows&&Yb.append('<i class="'+u+"__shadow "+u+'__shadow_prev"></i><i class="'+u+"__shadow "+u+'__shadow_next"></i>')):Yb.addClass(u+"__wrap_style_fade"),c().shadows&&b.addClass(u+"_shadows"),n&&b.addClass(u+"_csstransitions");if(c().arrows){var bc,cc;c().vertical?(bc=c().arrowPrev?c().arrowPrev:"&#9650;",cc=c().arrowNext?c().arrowNext:"&#9660;"):(bc=c().arrowPrev?c().arrowPrev:"&#9668;",cc=c().arrowNext?c().arrowNext:"&#9658;");var dc=a('<i class="'+u+"__arr "+u+'__arr_prev">'+bc+'</i><i class="'+u+"__arr "+u+'__arr_next">'+cc+"</i>").appendTo(Yb),ec=dc.eq(0),fc=dc.eq(1);g(dc);if(!l&&c().pseudoClick){var gc,hc,ic=function(){clearTimeout(hc),hc=setTimeout(function(){var a=gc>=$/2;fc[a?"addClass":"removeClass"](u+"__arr_hover"),ec[a?"removeClass":"addClass"](u+"__arr_hover"),c().touchStyle||Zb.css({cursor:a&&fc.data("disabled")||!a&&ec.data("disabled")?"default":"pointer"})},10)};Yb.mousemove(function(a){gc=a[Ub]-Yb.offset()[Sb],ic()})}}else!c().touchStyle&&c().pseudoClick&&1<W&&Zb.css({cursor:"pointer"});if(!l){var jc=!1,kc,lc=function(){jc=!0,clearTimeout(kc),c().arrows&&dc.css(f(0)),Yb.removeClass(u+"__wrap_mouseout"),setTimeout(function(){c().arrows&&dc.css(f(c().transitionDuration)),setTimeout(function(){Yb.addClass(u+"__wrap_mouseover")},1)},1)},mc=function(){clearTimeout(kc),kc=setTimeout(function(){!Hb&&!jc&&Yb.removeClass(u+"__wrap_mouseover").addClass(u+"__wrap_mouseout")},c().transitionDuration*3)};Yb.mouseenter(function(){lc()}),Yb.mouseleave(function(){jc=!1,mc()})}var nc,oc,pc,qc=a();U.each(function(){var b=a('<div class="'+u+'__frame" style="visibility: hidden;"></div>');qc=qc.add(b)});if(c().thumbs){var rc=Number(c().thumbSize);if(isNaN(rc)||!rc)rc=c().vertical?64:48;var sc,tc=0,uc=a('<div class="'+u+'__thumbs" style="visibility: hidden;"></div>')[c().thumbsOnTop?"prependTo":"appendTo"](b);c().touchStyle||g(uc);var vc;c().thumbsPreview&&(vc=rc+2*c().thumbMargin,uc.addClass(u+"__thumbs_previews").css(Xb,vc));var wc=a('<div class="'+u+'__thumbs-shaft"></div>').appendTo(uc);if(c().thumbsPreview){var xc=0,yc=void 0;c().shadows&&a('<i class="'+u+"__shadow "+u+'__shadow_prev"></i><i class="'+u+"__shadow "+u+'__shadow_next"></i>').appendTo(uc);var zc=rc-(q?0:2*c().thumbBorderWidth),Ac=c().thumbMargin,Bc={};Bc[Xb]=zc,Bc[Tb]=Ac,Bc.borderWidth=c().thumbBorderWidth;var Cc=a('<i class="'+u+'__thumb-border"></i>').css(Bc).appendTo(wc),Dc}U.each(function(){var b;if(c().thumbsPreview){b=a('<div class="'+u+'__thumb"></div>');var d={};d[Xb]=rc,d.margin=c().thumbMargin,b.css(d)}else b=a('<i class="'+u+'__thumb"><i class="'+u+'__thumb__dot"></i></i>');b.appendTo(wc)});var Ec=a("."+u+"__thumb",b);if(c().thumbsPreview)var Fc=function(b,d,e,f,g,h){d=a(b),f=c().vertical?Math.round(rc/f):Math.round(rc*f),k.canvas?(d.remove(),d=a('<canvas class="'+u+'__thumb__img"></canvas>'),d.appendTo(Ec.eq(h))):d.addClass(u+"__thumb__img"),e={},e[Wb]=f,e[Xb]=rc,d.attr(e).css(e).css({visibility:"visible"}),k.canvas&&(d[0].getContext("2d"),d[0].getContext("2d").drawImage(b,0,0,c().vertical?rc:f,c().vertical?f:rc)),xc+=f+c().thumbMargin-(rc+c().thumbMargin),wc.css(Wb,xc),e[Xb]=null,Ec.eq(h).css(e).data(e),I()},Gc=function(a){!Ob&&!Kb&&!Ib&&!xb?(a||(a=0),K(a,Ec.eq(a),Fc,"thumb"),setTimeout(function(){a+1<W&&Gc(a+1)},50)):setTimeout(function(){Gc(a)},100)}}if(c().caption){var Hc=a('<p class="'+u+'__caption"></p>');if("overlay"==c().caption)Hc.appendTo(Yb).addClass(u+"__caption_overlay");else{Hc.appendTo(b);var Ic=Hc.wrap('<div class="'+u+'__caption-outer"></div>').parent()}}j(c().width,c().height,c().aspectRatio);var Jc=[];O(qc.eq(c().startImg),!1,!1,!0,!1,!1,!0),ab&&bb&&(tb=!0,A()),c().thumbs&&c().thumbsPreview&&Gc(0),c().thumbs&&(c().dotColor&&!c().thumbsPreview&&Ec.children().css({backgroundColor:c().dotColor}),c().navBackground&&uc.css({background:c().navBackground}),c().thumbsPreview&&c().thumbBorderColor&&Cc.css({borderColor:c().thumbBorderColor})),c().background&&Yb.add(qc).css({background:c().background}),c().arrowsColor&&c().arrows&&dc.css({color:c().arrowsColor});var Kc=!1;R(),b.bind("dblclick",h),b.bind("showimg",function(a,b,d,e){typeof b!="number"&&(b=="next"?b=oc+1:b=="prev"?b=oc-1:b=="first"?b=0:b=="last"?b=W-1:(b=oc,e=!0)),b>W-1&&(b=0),(!c().touchStyle||!Ib)&&O(qc.eq(b),a,!1,!1,d,!1,e)}),b.bind("play",function(a,b){Db=!0,b=Number(b),isNaN(b)||(c().autoplay=b),N(t)}),b.bind("pause",function(){Db=!1}),b.bind("rescale",function(a,b,c,d,e){j(b,c,d),nb=lb=ab/bb,ub=!ib,e=Number(e),isNaN(e)&&(e=0),A(!1,e)}),b.bind("fullscreenopen",function(){zb=v.scrollTop(),Bb=v.scrollLeft(),vb=!0,ac&&ac.trigger("mouseleave",!0),v.scrollTop(0),x.add(y).addClass("fullscreen"),b.addClass(u+"_fullscreen"),(p||m)&&b.appendTo(y).addClass(u+"_fullscreen_quirks"),c().caption&&!c().caption!="overlay"&&Hc.appendTo(Yb),R(),nc&&O(nc,!1,!1,!0,0,!1,!0),A(!1,!1,!0)}),b.bind("fullscreenclose",function(){vb=!1,ac&&ac.trigger("mouseleave",!0),x.add(y).removeClass("fullscreen"),b.removeClass(u+"_fullscreen"),(p||m)&&b.appendTo(Y).removeClass(u+"_fullscreen_quirks"),c().caption&&!c().caption!="overlay"&&Hc.appendTo(Ic),v.scrollTop(zb),v.scrollLeft(Bb),ib||(ab=c().width,bb=c().height),nc&&O(nc,!1,!1,!0,0,!1,!0),c().flexible?B():A(!1,!1,!0)}),w.bind("keydown",function(a){vb&&(a.keyCode==27&&!c().fullscreen?b.trigger("fullscreenclose"):a.keyCode==39||a.keyCode==40?b.trigger("showimg",oc+1):(a.keyCode==37||a.keyCode==38)&&b.trigger("showimg",oc-1))});if(c().thumbs){var Lc=function(b){b.stopPropagation();if(!a(this).data("disabled")){var c=Ec.index(a(this)),d=b[Ub]-uc.offset()[Sb];O(qc.eq(c),b,d)}};Ec.bind("click",Lc)}c().arrows&&(ec.bind("click",function(b){a(this).data("disabled")||P(-1,b)}),fc.bind("click",function(b){a(this).data("disabled")||P(1,b)})),!c().touchStyle&&!l&&c().pseudoClick&&Yb.bind("click",function(a){var d=a[Ub]-Yb.offset()[Sb]>=$/2;if(c().onClick)var e=c().onClick.call(b[0],E());e!==!1&&(!a.shiftKey&&d&&c().arrows||a.shiftKey&&!d&&c().arrows||!c().arrows&&!a.shiftKey?P(1,a):P(-1,a))}),ac&&ac.bind("click",function(a){a.stopPropagation(),b.trigger(vb?"fullscreenclose":"fullscreenopen")}).bind("mouseenter mouseleave",function(a,b){b&&a.stopPropagation(),ac[a.type=="mouseenter"?"addClass":"removeClass"](u+"__fsi_hover")}),c().fullscreen&&b.trigger("fullscreenopen");if(c().touchStyle||l||c().thumbs&&c().thumbsPreview)var Mc=function(a,b,e,g){function h(e){if((l||e.which<2)&&nc){var g=function(){u=(new Date).getTime(),q=o,s=p,v=[[u,o]],clearTimeout(a.data("backAnimate")),n?a.css(f(0)):a.stop(),m=a.position()[Sb],a.css(d(m,c().vertical)),t=m,b()};if(l){if(l&&e.targetTouches.length==1)o=e.targetTouches[0][Ub],p=e.targetTouches[0][Vb],g(),a[0].addEventListener("touchmove",j,!1),a[0].addEventListener("touchend",k,!1);else if(l&&e.targetTouches.length>1)return!1}else o=e[Ub],e.preventDefault(),g(),w.mousemove(j),w.mouseup(k)}}function j(b){function f(){b.preventDefault(),x=(new Date).getTime(),v.push([x,o]);var f=q-o;m=t-f,m>a.data("maxPos")?(m=Math.round(m+(a.data("maxPos")-m)/1.5),D="left"):m<a.data("minPos")?(m=Math.round(m+(a.data("minPos")-m)/1.5),D="right"):D=!1,c().touchStyle&&a.css(d(m,c().vertical)),e(m,f,D)}l?l&&b.targetTouches.length==1&&(o=b.targetTouches[0][Ub],p=b.targetTouches[0][Vb],C?B===!0&&f():Math.abs(o-q)-Math.abs(p-s)>=-5?(B=!0,b.preventDefault(),C=!0):Math.abs(p-s)-Math.abs(o-q)>=-5&&(B="prevent",C=!0)):(o=b[Ub],f())}function k(b){if(!l||!b.targetTouches.length){l?(a[0].removeEventListener("touchmove",j,!1),a[0].removeEventListener("touchend",k,!1)):(w.unbind("mouseup"),w.unbind("mousemove")),z=(new Date).getTime();var c=-m,d=z-r,e,f,h,n;for(i=0;i<v.length;i++)e=Math.abs(d-v[i][0]),i==0&&(f=e,h=z-v[i][0],n=v[i][1]),e<=f&&(f=e,h=v[i][0],n=v[i][1]);d=n-o,e=d>=0,h=z-h,g(c,h,h<=r,z-A,e===y,d,b,B),A=z,y=e,C=B=!1}}var m,o,p,q,s,t,u,v=[],x,y,z,A=0,B=!1,C=!1,D=!1;l?a[0].addEventListener("touchstart",h,!1):a.mousedown(h)};if(c().touchStyle||l){var Nc=!1;Mc(Zb,function(){Ib=!0},function(b,d,f){clearTimeout(Jb),Hb||(c().shadows&&Yb.addClass(u+"__wrap_shadow"),l||Zb.addClass(u+"__shaft_grabbing"),Hb=!0),c().shadows&&(f?(b=f=="left"?"right":"left",Yb.addClass(u+"__wrap_shadow_no-"+f).removeClass(u+"__wrap_shadow_no-"+b)):c().shadows&&Yb.removeClass(u+"__wrap_shadow_no-left "+u+"__wrap_shadow_no-right")),Math.abs(d)>=5&&!Nc&&(Nc=!0,a("a",Yb).bind("click",e))},function(d,f,g,h,i,j,k,m){Ib=!1,Jb=setTimeout(function(){!l&&c().arrows&&mc(),Nc=!1,a("a",Yb).unbind("click",e)},r),l||Zb.removeClass(u+"__shaft_grabbing"),c().shadows&&Yb.removeClass(u+"__wrap_shadow");var i=h=!1,n,o;c().html&&(n=a(k.target),o=n.filter("a"),o.length||(o=n.parents("a")));if(c().touchStyle)if(Hb){g&&(j<=-10?h=!0:j>=10&&(i=!0)),g=t,m=Math.round(d/($+c().margin));if(h||i){var f=-j/f,j=Math.round(-d+f*250),p;h?(m=Math.ceil(d/($+c().margin))-1,d=-m*($+c().margin),j>d&&(p=Math.abs(j-d),g=Math.abs(g/(f*250/(Math.abs(f*250)-p*.97))),p=d+p*.03)):i&&(m=Math.floor(d/($+c().margin))+1,d=-m*($+c().margin),j<d&&(p=Math.abs(j-d),g=Math.abs(g/(f*250/(Math.abs(f*250)-p*.97))),p=d-p*.03))}m<0&&(m=0,p=!1,g=t),m>W-1&&(m=W-1,p=!1,g=t),O(qc.eq(m),k,!1,!1,g,p)}else{if(c().html&&o.length)return!1;if(c().onClick&&m!="prevent")var q=c().onClick.call(b[0],E());q!==!1&&c().pseudoClick&&!l&&f<r?(p=k[Ub]-Yb.offset()[Sb]>=$/2,!k.shiftKey&&p&&c().arrows||k.shiftKey&&!p&&c().arrows||!c().arrows&&!k.shiftKey?P(1,k):P(-1,k)):O(nc,k,!1,!1,!1,!1,!0)}else{if(j==0&&c().html&&o.length)return!1;j>=0?P(1,k):j<0&&P(-1,k)}Hb=!1});if(c().touchStyle&&c().thumbs&&c().thumbsPreview){var Oc=!1;Mc(wc,function(){Lb=Kb=!0},function(a,b){!Ob&&Math.abs(b)>=5&&(Ec.unbind("click",Lc),Oc=!0,clearTimeout(Pb),Ob=!0),H(a)},function(a,b,c,d,e,f,g){Ob=Kb=!1,Pb=setTimeout(function(){Oc&&(Ec.bind("click",Lc),Oc=!1)},r);var d=a=-a,h,e=t*2;Mb&&Ob&&(G(0,!1,!1),Mb=!1),a>wc.data("maxPos")?(d=wc.data("maxPos"),e/=2):a<wc.data("minPos")?(d=wc.data("minPos"),e/=2):c&&(b=-f/b,d=Math.round(a+b*250),d>wc.data("maxPos")?(h=Math.abs(d-wc.data("maxPos")),e=Math.abs(e/(b*250/(Math.abs(b*250)-h*.96))),d=wc.data("maxPos"),h=d+h*.04):d<wc.data("minPos")&&(h=Math.abs(d-wc.data("minPos")),e=Math.abs(e/(b*250/(Math.abs(b*250)-h*.96))),d=wc.data("minPos"),h=d-h*.04)),g.altKey&&(e*=10),yc=d,d!=a&&(F(wc,d,e,h),H(d))})}}}var k=function(a,b,c){function d(a,b){var c=a.charAt(0).toUpperCase()+a.substr(1),c=(a+" "+h.join(c+" ")+c).split(" ");return e(c,b)}function e(a,b){for(var d in a)if(g[a[d]]!==c)return"pfx"==b?a[d]:!0;return!1}a={},b.head||b.getElementsByTagName("head");var f=b.createElement("modernizr"),g=f.style,h=["Webkit","Moz","O","ms","Khtml"],f={},i=[],j,k={}.hasOwnProperty,l;typeof k!==c&&typeof k.call!==c?l=function(a,b){return k.call(a,b)}:l=function(a,b){return b in a&&typeof a.constructor.prototype[b]===c},f.canvas=function(){var a=b.createElement("canvas");return!!a.getContext&&!!a.getContext("2d")},f.csstransforms=function(){return!!e(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"])},f.csstransitions=function(){return d("transitionProperty")};for(var m in f)l(f,m)&&(j=m.toLowerCase(),a[j]=f[m](),i.push((a[j]?"":"no-")+j));return g.cssText="",f=null,a._version="2.0.6",a._domPrefixes=h,a.testProp=function(a){return e([a])},a.testAllProps=d,a}(this,this.document);a.extend({bez:function(b){var c="bez_"+a.makeArray(arguments).join("_").replace(".","p");if("function"!=typeof jQuery.easing[c]){var d=function(a,b){var c=[null,null],d=[null,null],e=[null,null],f=function(f,g){return e[g]=3*a[g],d[g]=3*(b[g]-a[g])-e[g],c[g]=1-e[g]-d[g],f*(e[g]+f*(d[g]+f*c[g]))};return function(a){for(var b=a,g=0,h;14>++g;){h=f(b,0)-a;if(.001>Math.abs(h))break;b-=h/(e[0]+b*(2*d[0]+3*c[0]*b))}return f(b,1)}};jQuery.easing[c]=function(a,c,e,f,g){return f*d([b[0],b[1]],[b[2],b[3]])(c/g)+e}}return c}});var l="ontouchstart"in document,m=navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad|iemobile|windows ce|netfront|playstation|midp|up\.browser|symbian|nintendo|wii)/),n=k.csstransforms&&k.csstransitions&&!a.browser.mozilla,o=a.browser.msie,p=o&&"6.0"==a.browser.version,q="CSS1Compat"!=document.compatMode&&o,r=300,s=a.bez([.1,0,.25,1]),t=333,u="fotorama",v=a(window),w=a(document),x,y,z=[["width","string",null],["height","string",null],["aspectRatio","number",null],["touchStyle","boolean",!0],["click","boolean",null],["pseudoClick","boolean",!0],["loop","boolean",!1],["autoplay","boolean-number",!1],["stopAutoplayOnAction","boolean",!0],["transitionDuration","number",t],["background","string",null],["backgroundColor","string",null],["margin","number",5],["minPadding","number",10],["alwaysPadding","boolean",!1],["zoomToFit","boolean",!0],["cropToFit","boolean",!1],["flexible","boolean",!1],["fitToWindowHeight","boolean",!1],["fullscreen","boolean",!1],["fullscreenIcon","boolean",!1],["vertical","boolean",!1],["arrows","boolean",!0],["arrowsColor","string",null],["arrowPrev","string",null],["arrowNext","string",null],["nav","string",null],["thumbs","boolean",!0],["navPosition","string",null],["thumbsOnTop","boolean",!1],["thumbsOnRight","boolean",!1],["navBackground","string",null],["thumbsBackgroundColor","string",null],["dotColor","string",null],["thumbColor","string",null],["thumbsPreview","boolean",!0],["thumbSize","number",null],["thumbMargin","number",5],["thumbBorderWidth","number",3],["thumbBorderColor","string",null],["caption","string",!1],["preload","number",3],["preloader","boolean","dark"],["shadows","boolean",!0],["data","array",null],["html","array",null],["hash","boolean",!1],["startImg","number",0],["onShowImg","function",null],["onClick","function",null],["onSlideStop","function",null],["detachSiblings","boolean",!0]];a.fn[u]=function(c){"undefined"==typeof fotoramaDefaults&&(fotoramaDefaults={});var d=a.extend(b(),a.extend({},fotoramaDefaults,c));return this.each(function(){var b=a(this);b.data("ini")||j(b,d)}),this},a(function(){x=a("html"),y=a("body"),a("."+u).each(function(){var c=a(this);c[u](b(c))})});var A=["-webkit-","-moz-","-o-","-ms-",""],B=new Image,C=!0;B.onerror=function(){if(1!=this.width||1!=this.height)C=!1},B.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}(jQuery),function(a){var b={xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",html:"http://www.w3.org/1999/xhtml/"},c={};for(var d in b)c[b[d]]=d;a.extend({xmlns:a.extend({},b,{"":"*"})});var e=[];a.fn.extend({xmlns:function(b,c){typeof b=="string"&&(b={"":b});if(b){e.push(a.xmlns),a.xmlns=a.extend({},a.xmlns,b);if(c!==undefined){if(typeof c=="string")return this.find(c).xmlns(undefined);var d=this;try{d=c.call(this),d||(d=this)}finally{d.xmlns(undefined)}return d}return this}return a.xmlns=e?e.pop():{},this}});var f=function(b){if(!b)return a.xmlns[""];b=b.substr(0,b.length-1);if(b==""||b=="*")return b;var c=a.xmlns[b];if(typeof c=="undefined")throw"Syntax error, undefined namespace prefix '"+b+"'";return c},g=function(b,c){a.expr.match[b]=new RegExp(c.source+/(?![^\[]*\])(?![^\(]*\))/.source),a.expr.leftMatch&&(a.expr.leftMatch[b]=new RegExp(/(^(?:.|\r|\n)*?)/.source+a.expr.match[b].source.replace(/\\(\d+)/g,function(a,b){return"\\"+(b-0+1)})))};g("TAG",/^((?:((?:[\w\u00c0-\uFFFF\*_-]*\|)?)((?:[\w\u00c0-\uFFFF\*_-]|\\.)+)))/);var h=document.createElement("div"),i=!1;h.appendChild(document.createComment("")),h.getElementsByTagName("*").length>0&&(i=!0);var j=!0;h.localName&&h.localName=="div"&&(j=!1),h=null,a.expr.find.TAG=function(a,b,c){var d=f(a[2]),e=a[3],g;if(typeof b.getElementsByTagNameNS!="undefined")g=b.getElementsByTagNameNS(d,e);else if(typeof b.selectNodes!="undefined"){b.ownerDocument?b.ownerDocument.setProperty("SelectionLanguage","XPath"):b.setProperty("SelectionLanguage","XPath");var h="";d!="*"?e!="*"?h="namespace-uri()='"+d+"' and local-name()='"+e+"'":h="namespace-uri()='"+d+"'":e!="*"&&(h="local-name()='"+e+"'"),h?g=b.selectNodes("descendant-or-self::*["+h+"]"):g=b.selectNodes("descendant-or-self::*")}else{g=b.getElementsByTagName(e);if(i&&e=="*"){var j=[];for(var k=0;g[k];k++)g[k].nodeType==1&&j.push(g[k]);g=j}if(g&&d!="*"){var j=[];for(var k=0;g[k];k++)(g[k].namespaceURI==d||g[k].tagUrn==d)&&j.push(g[k]);g=j}}return g};var k=function(a){return a.nodeType===9&&a.documentElement.nodeName!=="HTML"||!!a.ownerDocument&&a.ownerDocument.documentElement.nodeName!=="HTML"};a.expr.preFilter.TAG=function(a,b,c,d,e,g){var h=a[3];return g||(j?h=h.toUpperCase():h=h.toLowerCase()),[a[0],f(a[2]),h]},a.expr.filter.TAG=function(a,b){var c=b[1],d=b[2],e=a.namespaceURI?a.namespaceURI:a.tagUrn,f=a.localName?a.localName:a.tagName;return c=="*"||e==c||c==""&&!e?d=="*"&&a.nodeType==1||f==d:!1},g("ATTR",/\[\s*((?:((?:[\w\u00c0-\uFFFF\*_-]*\|)?)((?:[\w\u00c0-\uFFFF_-]|\\.)+)))\s*(?:(\S?=)\s*(['"]*)(.*?)\5|)\s*\]/),a.expr.preFilter.ATTR=function(b,c,d,e,g,h){var i=b[3].replace(/\\/g,"");return!h&&a.expr.attrMap[i]&&(b[3]=a.expr.attrMap[i]),b[4]=="~="&&(b[6]=" "+b[6]+" "),!b[2]||b[2]=="|"?b[2]="":b[2]=f(b[2]),b};var l=function(a,b,c){var d=a+"";return a==null?b==="!=":b==="="?d===c:b==="*="?d.indexOf(c)>=0:b==="~="?(" "+d+" ").indexOf(c)>=0:c?b==="!="?d!=c:b==="^="?d.indexOf(c)===0:b==="$="?d.substr(d.length-c.length)===c:b==="|="?d===c||d.substr(0,c.length+1)===c+"-":!1:d&&a!==!1};a.expr.filter.ATTR=function(b,d){var e=d[2],f=d[3],g=d[4],h=d[6],i;if(e=="")return i=a.expr.attrHandle[f]?a.expr.attrHandle[f](b):b[f]!=null?b[f]:b.getAttribute(f),l(i,g,h);if(e!="*"&&typeof b.getAttributeNS!="undefined")return l(b.getAttributeNS(e,f),g,h);var j=b.attributes;for(var k=0;j[k];k++){var m=j[k].localName;if(!m){m=j[k].nodeName;var n=m.indexOf(":");n>=0&&(m=m.substr(n+1))}if(m==f){i=j[k].nodeValue;if(e=="*"||j[k].namespaceURI==e)if(l(i,g,h))return!0;if(j[k].namespaceURI===""&&j[k].prefix&&j[k].prefix==c[e]&&l(i,g,h))return!0}}return!1}}(jQuery),BEM.DOM.decl("b-gallery",{onSetMod:{js:function(){var a=this,b=a.params.size,c=a.params.rss,d=a.params.gWidth,e=a.params.gHeight,f=[],g=[],h=[];$.get(c,function(c){$.xmlns.media="http://search.yahoo.com/mrss",$(c).find("item").each(function(a){if(a<b){var c=$(this).find("media|thumbnail").attr("url").substr(5,999),d=$(this).find("link").text(),e=$(this).find("author").text(),i="   .: <a href="+d+" class=b-author target=_blank>"+e+"</a>",j={};j.caption=i,c&&c.indexOf("null")<0&&(c=c.substr(0,c.length-1),j.img=c+"XL",j.full=c+"XXL",j.thumb=c+"XS",f.push(j),g.push(d),h.push(j.thumb))}}),a.params.photos=f,a.params.links=g,a.params.thumbs=h,$(".b-gallery").html('<div class="fotorama b-fotorama"></div>'),$(".b-fotorama").fotorama({width:d,height:e,caption:"simple",loop:!0,data:a.params.photos,onSlideStop:function(b,c){a.setMod("image",b.index)}})},"xml")}},getDefaultParams:function(){return{size:"30",rss:"/rss/rss.xml",gWidth:"800",gHeight:"520"}}}),BEM.DOM.decl("b-gallery",{onSetMod:{image:function(){var a=this;a.afterCurrentEvent(function(){var b=a.getMod("image"),c='<a target="_blank" class="mrc__plugin_like_button b-social__share" href="http://connect.mail.ru/share?url='+encodeURI(a.params.links[b])+"&amp;title="+encodeURI("   .")+"&amp;description="+encodeURI("    .")+'"></a>';$(".b-social__like").html(c)})}}});